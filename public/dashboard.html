<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soul's | Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="bg-vfx"></div>

    <!-- Main Window Wrapper -->
    <div id="mainWindow" class="window-wrapper">
        <div class="window-glow" id="winGlow"></div>
        <div class="window-main">
            <!-- Banner & Avatar -->
            <div id="winBanner" class="banner">
                <div class="avatar-container">
                    <img id="winAvatarImg" class="avatar-img">
                </div>
                <!-- Status Display -->
                <div id="winStatus" class="absolute bottom-[-40px] left-[140px] flex items-center gap-2 opacity-80">
                    <img id="winStatusEmoji" class="w-8 h-8 object-contain">
                    <span id="winStatusText"
                        class="text-[10px] font-bold uppercase tracking-wider text-white/50"></span>
                </div>
                <!-- Back to Login -->
                <button onclick="logout()"
                    class="absolute top-6 left-6 bg-black/40 p-2.5 rounded-2xl hover:bg-black/60 transition-colors">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <path d="M19 12H5M12 19l-7-7 7-7" />
                    </svg>
                </button>
                <div class="absolute top-6 right-6 flex gap-3">
                    <button id="addBtn" onclick="openActionModal()"
                        class="hidden bg-black/40 p-2.5 rounded-2xl hover:bg-black/60 transition-colors">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                        </svg>
                    </button>
                    <button id="editBtn" onclick="openEditModal()"
                        class="hidden bg-black/40 p-2.5 rounded-2xl hover:bg-black/60 transition-colors">
                        <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2.5"
                            viewBox="0 0 24 24">
                            <path
                                d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content">
                <div class="flex items-center gap-3 mb-2">
                    <h2 id="winName" class="text-3xl font-bold tracking-tight">Username</h2>
                    <div id="authStatus" class="hidden w-2.5 h-2.5 bg-green-500 rounded-full shadow-[0_0_10px_#22c55e]">
                    </div>
                </div>
                <p class="text-neutral-500 font-bold uppercase tracking-[0.2em] text-[10px] mb-8">Evolution Tier <span
                        id="winLevelNum" class="text-inherit">0</span></p>

                <!-- XP System -->
                <div class="xp-header font-bold uppercase tracking-[0.2em] text-[9px]">
                    <span class="opacity-40">Target Progression</span>
                    <span id="winXPStatus" class="tracking-widest">0 / 0 XP</span>
                </div>
                <div class="xp-bar-container">
                    <div id="xpLabelPoints" class="xp-points-labels"></div>
                    <div id="winXPBar" class="xp-bar-fill"></div>
                    <div id="winXPDots" class="nav-dots"></div>
                </div>

                <!-- Global Navigation (View Rewards) -->
                <div id="viewLevelCard"
                    class="flex items-center justify-between mb-10 bg-[rgba(128,128,128,0.05)] p-4 rounded-3xl border border-[rgba(128,128,128,0.05)]">
                    <button onclick="navViewLevel(-1)" class="opacity-40 hover:opacity-100 transition-opacity"><svg
                            width="24" height="24" fill="currentColor">
                            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
                        </svg></button>
                    <div class="text-center w-40">
                        <span id="viewLvlLabel"
                            class="text-[9px] opacity-40 font-bold uppercase tracking-[0.3em] block mb-1">Tier 0</span>
                        <p id="viewLvlReward" class="text-xs font-bold tracking-tight">Starting Hub</p>
                    </div>
                    <button onclick="navViewLevel(1)" class="opacity-40 hover:opacity-100 transition-opacity"><svg
                            width="24" height="24" fill="currentColor">
                            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
                        </svg></button>
                </div>

                <h3 class="text-[9px] font-bold opacity-30 uppercase tracking-[0.4em] mb-4">Logs</h3>
                <div id="winLogs" class="space-y-3">
                    <!-- Logs -->
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <h3 class="text-xl font-bold mb-8">Identity Configuration</h3>
            <div class="space-y-6">
                <div>
                    <label class="text-[9px] text-neutral-600 font-bold uppercase tracking-widest mb-2 block">Display
                        Name</label>
                    <input type="text" id="editName" class="input-minimal bg-white/5">
                </div>

                <!-- Status Input -->
                <div class="grid grid-cols-[auto_1fr] gap-3">
                    <div>
                        <label
                            class="text-[9px] text-neutral-600 font-bold uppercase tracking-widest mb-2 block">Mood</label>
                        <div class="flex gap-2">
                            <button onclick="toggleStatusPicker()"
                                class="w-12 h-10 bg-white/5 border border-white/10 rounded-xl flex items-center justify-center hover:bg-white/10 transition-colors">
                                <img id="editStatusEmojiPreview" src="" class="w-6 h-6 object-contain">
                            </button>
                            <button onclick="clearStatusEmoji()"
                                class="w-10 h-10 bg-red-500/10 border border-red-500/20 rounded-xl flex items-center justify-center hover:bg-red-500/20 text-red-400 font-bold transition-colors">
                                âœ•
                            </button>
                        </div>
                        <div id="statusEmojiPicker"
                            class="emoji-picker-container hidden absolute mt-2 z-50 w-64 bg-black border border-neutral-800">
                        </div>
                    </div>
                    <div>
                        <label class="text-[9px] text-neutral-600 font-bold uppercase tracking-widest mb-2 block">Status
                            Message</label>
                        <input type="text" id="editStatusText" class="input-minimal bg-white/5"
                            placeholder="Working on...">
                    </div>
                </div>

                <!-- Manual URL inputs removed -->

                <div class="grid grid-cols-2 gap-3 pb-4">
                    <label
                        class="btn-action bg-neutral-800 text-white text-[9px] uppercase py-3.5 text-center cursor-pointer">Upload
                        Avatar
                        <input type="file" onchange="handleImage(this, 'avatar')">
                    </label>
                    <label
                        class="btn-action bg-neutral-800 text-white text-[9px] uppercase py-3.5 text-center cursor-pointer">Upload
                        Banner
                        <input type="file" onchange="handleImage(this, 'banner')">
                    </label>
                </div>

                <div class="border-t border-neutral-900 pt-6">
                    <label
                        class="text-[9px] text-neutral-600 font-bold uppercase tracking-widest mb-4 block">Theming</label>
                    <div class="grid grid-cols-2 gap-6">
                        <div>
                            <label class="text-[8px] text-neutral-700 font-bold uppercase mb-2 block">Glow Color</label>
                            <div class="flex items-center gap-2">
                                <input type="color" id="editColorGlow"
                                    class="w-10 h-10 p-0 border-none bg-transparent cursor-pointer">
                                <input type="range" id="editOpacityGlow" min="0" max="255" value="255"
                                    class="w-full accent-neutral-500">
                            </div>
                        </div>
                        <div>
                            <label class="text-[8px] text-neutral-700 font-bold uppercase mb-2 block">Text Color</label>
                            <div class="flex items-center gap-2">
                                <input type="color" id="editColorText"
                                    class="w-10 h-10 p-0 border-none bg-transparent cursor-pointer">
                                <input type="range" id="editOpacityText" min="0" max="255" value="255"
                                    class="w-full accent-neutral-500">
                            </div>
                        </div>
                        <div>
                            <label class="text-[8px] text-neutral-700 font-bold uppercase mb-2 block">XP Bar
                                Color</label>
                            <div class="flex items-center gap-2">
                                <input type="color" id="editColorBar"
                                    class="w-10 h-10 p-0 border-none bg-transparent cursor-pointer">
                                <input type="range" id="editOpacityBar" min="0" max="255" value="255"
                                    class="w-full accent-neutral-500">
                            </div>
                        </div>
                        <div>
                            <label class="text-[8px] text-neutral-700 font-bold uppercase mb-2 block">Profile BG
                                Color</label>
                            <div class="flex items-center gap-2">
                                <input type="color" id="editColorBg"
                                    class="w-10 h-10 p-0 border-none bg-transparent cursor-pointer">
                                <input type="range" id="editOpacityBg" min="0" max="255" value="255"
                                    class="w-full accent-neutral-500">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="border-t border-neutral-900 pt-6">
                    <label
                        class="text-[9px] text-neutral-600 font-bold uppercase tracking-widest mb-2 block">Password</label>
                    <input type="password" id="editPass" class="input-minimal bg-white/5" placeholder="New Password">
                </div>
            </div>
            <div class="flex gap-4 mt-12">
                <button onclick="saveProfile()" class="flex-1 btn-action bg-white text-black">Apply Changes</button>
                <button onclick="closeModals()"
                    class="flex-1 text-neutral-600 font-bold uppercase text-[9px] tracking-widest">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Action Modal -->
    <div id="actionModal" class="modal">
        <div class="modal-content">
            <div class="flex gap-1 mb-8">
                <button id="tab-xp" onclick="setActionTab('xp')"
                    class="flex-1 py-3.5 rounded-2xl font-bold uppercase text-[9px] tracking-widest transition-all">XP
                    Mod</button>
                <button id="tab-rewards" onclick="setActionTab('rewards')"
                    class="flex-1 py-3.5 rounded-2xl font-bold uppercase text-[9px] tracking-widest transition-all">Rewards</button>
            </div>

            <div id="pane-xp" class="space-y-6">
                <div>
                    <label class="text-[9px] text-neutral-600 font-bold uppercase tracking-widest mb-2 block">XP</label>
                    <input type="number" id="xpAmount" class="input-minimal" placeholder="Amount (e.g. 25)">
                </div>
                <div>
                    <label class="text-[9px] text-neutral-600 font-bold uppercase tracking-widest mb-2 block">Reason /
                        Event</label>
                    <input type="text" id="xpReason" class="input-minimal" placeholder="Reason for change">
                </div>
                <div>
                    <label
                        class="text-[9px] text-neutral-600 font-bold uppercase tracking-widest mb-2 block">Emoji</label>
                    <div class="flex items-center gap-4 bg-[rgba(128,128,128,0.05)] p-3 rounded-2xl">
                        <img id="selectedEmojiImg" src="emojis/1019-c-cry.gif" class="w-10 h-10 object-contain">
                        <button onclick="toggleEmojiPicker()"
                            class="text-[9px] font-bold uppercase tracking-widest">Select Signal</button>
                    </div>
                    <div id="emojiPicker" class="emoji-picker-container hidden"></div>
                </div>
                <div class="grid grid-cols-2 gap-3 pt-4">
                    <button onclick="applyXP(true)" class="btn-action bg-white text-black">Add +</button>
                    <button onclick="applyXP(false)" class="btn-action bg-neutral-900 text-white">Remove -</button>
                </div>
                <div class="border-t border-neutral-900 pt-6">
                    <label class="text-[9px] text-neutral-600 font-bold uppercase tracking-widest mb-2 block">Manual
                        Tier Jump</label>
                    <div class="flex gap-2">
                        <input type="number" id="jumpLevel" class="input-minimal" placeholder="Tier 1-100">
                        <button onclick="applyLevelJump()" class="btn-action bg-white text-black px-6">Jump</button>
                    </div>
                </div>
            </div>

            <div id="pane-rewards" class="hidden">
                <div id="rewardsGrid" class="grid grid-cols-2 gap-3 max-h-[400px] overflow-y-auto pr-2"></div>
            </div>
            <button onclick="closeModals()"
                class="w-full mt-8 text-neutral-600 font-bold uppercase text-[9px] tracking-widest">Close
                System</button>
        </div>
    </div>

    <div id="setRewardModal" class="modal" style="z-index:300">
        <div class="modal-content">
            <h3 class="text-xl font-bold mb-2">Configure Tier <span id="rewardSetLvl">0</span></h3>
            <p class="text-[9px] text-neutral-600 font-bold uppercase tracking-widest mb-8">Set progression reward</p>
            <input type="text" id="rewardInput" class="input-minimal mb-8" placeholder="Enter Description">
            <div class="flex gap-4">
                <button onclick="confirmReward()" class="flex-1 btn-action bg-white text-black">Update Tier</button>
                <button onclick="closeRewardModal()"
                    class="flex-1 text-neutral-600 font-bold uppercase text-[9px] tracking-widest">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed top-6 right-6 z-[9999] flex flex-col gap-2 pointer-events-none"></div>

    <script src="js/script.js"></script>
</body>

</html>